@page "/apartments"
@using GolfViewApartments.Data
@using GolfViewApartments.Models
@namespace GolfViewApartments.Components.UI

<!-- Hero Section -->
<section class="bg-primary py-20">
    <div class="relative w-full container mx-auto px-4 sm:px-2 md:px-14 lg:px-18 xl:px-[88px] max-w-[1440px]">
        <div class="max-w-2xl">
            <h1 class="text-4xl md:text-5xl font-heading font-bold text-white mb-4">
                Our Apartments
            </h1>
            <p class="text-white text-lg">
                Choose from @ApartmentData.TotalUnits beautifully appointed apartments across studios,
                1-bedroom, and 2-bedroom configurations. All rooms feature 5x6 beds.
            </p>
        </div>
    </div>
</section>

<!-- Quick Info Cards -->
<section class="py-12 bg-secondary">
    <div class="relative w-full container mx-auto px-4 sm:px-2 md:px-14 lg:px-18 xl:px-[88px] max-w-[1440px]">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Room Specs -->
            <div class="bg-card rounded-xl p-6 shadow-soft">
                <div class="flex items-center gap-3 mb-4">
                    <div class="h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center">
                        <svg class="h-5 w-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M2 4v16M2 8h18a2 2 0 0 1 2 2v10M2 17h20M6 8v9" />
                        </svg>
                    </div>
                    <h3 class="font-heading font-semibold text-foreground">Room Specs</h3>
                </div>
                <ul class="space-y-2 text-sm">
                    @foreach (var apt in ApartmentData.Apartments)
                    {
                        <li class="flex items-center justify-between">
                            <span class="text-foreground">@apt.Name</span>
                            <span class="text-muted-foreground">@apt.Size • Max @apt.MaxGuests</span>
                        </li>
                    }
                    <li class="pt-2 border-t border-border text-muted-foreground">
                        All beds: 5x6 size
                    </li>
                </ul>
            </div>

            <!-- Meal Plans -->
            <div class="bg-card rounded-xl p-6 shadow-soft">
                <div class="flex items-center gap-3 mb-4">
                    <div class="h-10 w-10 rounded-full bg-accent/20 flex items-center justify-center">
                        <svg class="h-5 w-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2M7 2v20M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7" />
                        </svg>
                    </div>
                    <h3 class="font-heading font-semibold text-foreground">Meal Plans</h3>
                </div>
                <ul class="space-y-2 text-sm text-muted-foreground">
                    @foreach (var plan in ApartmentData.MealPlans)
                    {
                        <li class="flex items-center justify-between">
                            <span class="font-medium text-foreground">@plan.Value.Label</span>
                            <span>@plan.Value.ShortLabel</span>
                        </li>
                    }
                </ul>
            </div>

            <!-- Total Units -->
            <div class="bg-card rounded-xl p-6 shadow-soft">
                <div class="flex items-center gap-3 mb-4">
                    <div class="h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center">
                        <svg class="h-5 w-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" />
                        </svg>
                    </div>
                    <h3 class="font-heading font-semibold text-foreground">Availability</h3>
                </div>
                <div class="space-y-2 text-sm">
                    @foreach (var apt in ApartmentData.Apartments)
                    {
                        <div class="flex items-center justify-between">
                            <span class="text-foreground">@apt.Name</span>
                            <span class="text-muted-foreground">@apt.Units units</span>
                        </div>
                    }
                    <div class="border-t border-border pt-2 mt-2 flex items-center justify-between font-semibold">
                        <span class="text-foreground">Total</span>
                        <span class="text-primary">@ApartmentData.TotalUnits apartments</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Rates Table -->
<section class="py-16">
    <div class="relative w-full container mx-auto px-4 sm:px-2 md:px-14 lg:px-18 xl:px-[88px] max-w-[1440px]">
        <h2 class="text-2xl md:text-3xl font-heading font-bold text-foreground mb-8 text-center">
            Room Rates
        </h2>
        <RatesTable />
    </div>
</section>

<!-- Availability & Building Layout -->
<section class="py-16 bg-secondary">
    <div class="relative w-full container mx-auto px-4 sm:px-2 md:px-14 lg:px-18 xl:px_px-[88px] max-w-[1440px]">
        <div class="grid lg:grid-cols-2 gap-12">
            <div>
                <h2 class="text-2xl md:text-3xl font-heading font-bold text-foreground mb-6">
                    Check Availability
                </h2>
                <AvailabilityCalender />
            </div>
            <div>
                <h2 class="text-2xl md:text-3xl font-heading font-bold text-foreground mb-6">
                    Building Layout
                </h2>
                <BuildingLayout />
            </div>
        </div>
    </div>
</section>

<!-- Apartments List -->
<section class="py-16">
    <div class="relative w-full container mx-auto px-4 sm:px-2 md:px-14 lg:px-18 xl:px-[88px] max-w-[1440px]">
        <h2 class="text-2xl md:text-3xl font-heading font-bold text-foreground mb-8 text-center">
            Apartment Details
        </h2>
        <div class="space-y-12">
            @for (int index = 0; index < ApartmentData.Apartments.Count; index++)
            {
                var apartment = ApartmentData.Apartments[index];
                var isReversed = index % 2 == 1;

                <div class="grid lg:grid-cols-2 gap-8 items-center">
                    <div class="@(isReversed ? "lg:order-2" : "")">
                        <a href="/apartments/@apartment.Id" class="block group">
                            <div class="relative overflow-hidden rounded-xl">
                                <img src="@apartment.Image" alt="@apartment.Name"
                                    class="w-full h-[400px] object-cover transition-transform duration-500 group-hover:scale-105" />
                                <div
                                    class="absolute top-4 left-4 bg-primary text-primary-foreground px-3 py-1.5 rounded-full text-xs font-medium">
                                    @apartment.Units Units Available
                                </div>
                                <div class="absolute top-4 right-4 space-y-2">
                                    <div
                                        class="bg-accent text-accent-foreground px-4 py-2 rounded-full font-semibold text-sm">
                                        KES @apartment.Pricing.DailyBedOnly.ToString("N0")/night
                                    </div>
                                    <div
                                        class="bg-card/90 backdrop-blur-sm text-foreground px-4 py-2 rounded-full font-semibold text-sm">
                                        KES @apartment.Pricing.MonthlyBedOnly.ToString("N0")/month
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>

                    <div class="space-y-6 @(isReversed ? "lg:order-1" : "")">
                        <div>
                            <span class="text-xs font-medium text-primary uppercase tracking-wide">
                                @apartment.Type.Replace("-", " ") • @apartment.Bedrooms
                            </span>
                            <h2 class="text-3xl font-heading font-bold text-foreground mt-1 mb-3">
                                @apartment.Name
                            </h2>
                            <p class="text-muted-foreground leading-relaxed">
                                @apartment.Description
                            </p>
                        </div>

                        <div class="flex flex-wrap gap-6 text-sm">
                            <div class="flex items-center gap-2 text-foreground">
                                <svg class="h-5 w-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" />
                                </svg>
                                <span>Max @apartment.MaxGuests Guests</span>
                            </div>
                            <div class="flex items-center gap-2 text-foreground">
                                <svg class="h-5 w-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <rect x="3" y="3" width="18" height="18" rx="2" />
                                    <path d="M3 9h18M9 21V9" />
                                </svg>
                                <span>@apartment.Size</span>
                            </div>
                            <div class="flex items-center gap-2 text-foreground">
                                <svg class="h-5 w-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path d="M2 4v16M2 8h18a2 2 0 0 1 2 2v10M2 17h20M6 8v9" />
                                </svg>
                                <span>@apartment.BedSize Bed</span>
                            </div>
                            <div class="flex items-center gap-2 text-foreground">
                                <svg class="h-5 w-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M9 6 6.5 3.5a1.5 1.5 0 0 0-1 0l-1 1a1.5 1.5 0 0 0 0 1L7 9M15 6l2.5-2.5a1.5 1.5 0 0 1 1 0l1 1a1.5 1.5 0 0 1 0 1L17 9" />
                                    <path d="M6 9h12v12H6z" />
                                </svg>
                                <span>@apartment.Bathrooms Bath</span>
                            </div>
                        </div>

                        <div>
                            <h4 class="text-sm font-semibold text-foreground mb-3">Amenities:</h4>
                            <div class="flex flex-wrap gap-2">
                                @foreach (var amenity in apartment.Amenities.Take(6))
                                {
                                    <span
                                        class="inline-flex items-center gap-1.5 bg-secondary text-secondary-foreground px-3 py-1.5 rounded-full text-sm">
                                        @if (amenity.Contains("WiFi"))
                                        {
                                            <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path
                                                    d="M5 12.55a11 11 0 0 1 14.08 0M1.42 9a16 16 0 0 1 21.16 0M8.53 16.11a6 6 0 0 1 6.95 0M12 20h.01" />
                                            </svg>
                                        }
                                        else if (amenity.Contains("Air Conditioning"))
                                        {
                                            <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path
                                                    d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2M9.6 4.6A2 2 0 1 1 11 8H2m8.6 8.6A2 2 0 1 0 11 20H2" />
                                            </svg>
                                        }
                                        else if (amenity.Contains("TV"))
                                        {
                                            <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <rect width="20" height="15" x="2" y="7" rx="2" ry="2" />
                                                <polyline points="17 2 12 7 7 2" />
                                            </svg>
                                        }
                                        @amenity
                                    </span>
                                }
                                @if (apartment.Amenities.Count > 6)
                                {
                                    <span
                                        class="inline-flex items-center bg-muted text-muted-foreground px-3 py-1.5 rounded-full text-sm">
                                        +@(apartment.Amenities.Count - 6) more
                                    </span>
                                }
                            </div>
                        </div>

                        <!-- Pricing Summary -->
                        <div class="bg-secondary rounded-lg p-4">
                            <h4 class="text-sm font-semibold text-foreground mb-3">Rates (KES):</h4>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <span class="text-muted-foreground">Daily B/O</span>
                                    <p class="font-semibold text-foreground">@apartment.Pricing.DailyBedOnly.ToString("N0")
                                    </p>
                                </div>
                                <div>
                                    <span class="text-muted-foreground">Daily B+B</span>
                                    <p class="font-semibold text-foreground">@apartment.Pricing.DailyBB.ToString("N0")</p>
                                </div>
                                <div>
                                    <span class="text-muted-foreground">Monthly B/O</span>
                                    <p class="font-semibold text-foreground">
                                        @apartment.Pricing.MonthlyBedOnly.ToString("N0")</p>
                                </div>
                                <div>
                                    <span class="text-muted-foreground">Monthly B+B</span>
                                    <p class="font-semibold text-foreground">@apartment.Pricing.MonthlyBB.ToString("N0")</p>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-wrap gap-4">
                            <a href="/booking"
                                class="inline-flex items-center justify-center bg-accent hover:bg-accent/90 text-white font-semibold px-6 py-3 rounded-lg transition-colors">
                                Book Now
                            </a>
                            <a href="/apartments/@apartment.Id"
                                class="inline-flex items-center justify-center border border-border hover:bg-secondary text-foreground font-semibold px-6 py-3 rounded-lg transition-colors">
                                View Details
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- CTA -->
<section class="py-16 bg-primary/50">
    <div
        class="relative w-full container mx-auto px-4 sm:px-2 md:px-14 lg:px-18 xl:px-[88px] max-w-[1440px] text-center">
        <h2 class="text-2xl md:text-3xl font-heading font-bold text-foreground mb-4">
            Need Help Choosing?
        </h2>
        <p class="text-muted-foreground max-w-xl mx-auto mb-6">
            Our team is here to help you find the perfect apartment for your stay.
            Contact us for personalized recommendations.
        </p>
        <a href="/contact"
            class="inline-flex items-center justify-center bg-primary hover:bg-primary/90 text-primary-foreground font-semibold px-6 py-3 rounded-lg transition-colors">
            Contact Us
        </a>
    </div>
</section>